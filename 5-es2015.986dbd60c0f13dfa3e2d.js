(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{MLfN:function(t,e,i){"use strict";i.r(e),i.d(e,"CbookModule",(function(){return $}));var c=i("ofXK"),n=i("3Pt+"),r=i("fXoL"),o=i("AytR"),b=i("tk/3");let l=(()=>{class t{constructor(t){this.http=t,this.baseUrl=o.a.baseUrl}addContact(t){return this.http.post(`${this.baseUrl}new`,t)}getContacts(){return this.http.get(`${this.baseUrl}getall`)}delete(t){return this.http.delete(`${this.baseUrl}delete/${t}`)}search(t){return this.http.get(`${this.baseUrl}search/${t}`)}updateContact(t){return this.http.put(`${this.baseUrl}update`,t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(b.a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var s=i("qXBG");function a(t,e){1&t&&(r.Mb(0,"th",19),r.lc(1,"Edit"),r.Lb())}function d(t,e){1&t&&(r.Mb(0,"th",19),r.lc(1,"Delete"),r.Lb())}function h(t,e){if(1&t){const t=r.Nb();r.Mb(0,"td"),r.Mb(1,"i",23),r.Ub("click",(function(){r.fc(t);const e=r.Wb().$implicit;return r.Wb(2).editContact(e)})),r.Lb(),r.Lb()}}function m(t,e){if(1&t){const t=r.Nb();r.Mb(0,"td"),r.Mb(1,"i",24),r.Ub("click",(function(){r.fc(t);const e=r.Wb().$implicit;return r.Wb(2).delete(e)})),r.Lb(),r.Lb()}}function u(t,e){if(1&t&&(r.Mb(0,"tr"),r.Mb(1,"th",22),r.lc(2),r.Lb(),r.Mb(3,"td"),r.lc(4),r.Lb(),r.Mb(5,"td"),r.lc(6),r.Lb(),r.Mb(7,"td"),r.lc(8),r.Lb(),r.Mb(9,"td"),r.lc(10),r.Lb(),r.jc(11,h,2,0,"td",13),r.jc(12,m,2,0,"td",13),r.Lb()),2&t){const t=e.$implicit,i=e.index,c=r.Wb(2);r.zb(2),r.mc(i+1),r.zb(2),r.mc(t.name),r.zb(2),r.mc(t.mobile),r.zb(2),r.mc(t.email),r.zb(2),r.mc(t.city),r.zb(1),r.bc("ngIf",c.userProfile&&"admin"==c.userProfile.role),r.zb(1),r.bc("ngIf",c.userProfile&&"admin"==c.userProfile.role)}}function f(t,e){if(1&t&&(r.Mb(0,"div"),r.Mb(1,"table",18),r.Mb(2,"thead"),r.Mb(3,"tr"),r.Mb(4,"th",19),r.lc(5,"#"),r.Lb(),r.Mb(6,"th",19),r.lc(7,"Name"),r.Lb(),r.Mb(8,"th",19),r.lc(9,"Mobile"),r.Lb(),r.Mb(10,"th",19),r.lc(11,"Email"),r.Lb(),r.Mb(12,"th",19),r.lc(13,"City"),r.Lb(),r.jc(14,a,2,0,"th",20),r.jc(15,d,2,0,"th",20),r.Lb(),r.Lb(),r.Mb(16,"tbody"),r.jc(17,u,13,7,"tr",21),r.Lb(),r.Lb(),r.Lb()),2&t){const t=r.Wb();r.zb(14),r.bc("ngIf",t.userProfile&&"admin"==t.userProfile.role),r.zb(1),r.bc("ngIf",t.userProfile&&"admin"==t.userProfile.role),r.zb(2),r.bc("ngForOf",t.contacts)}}function p(t,e){1&t&&(r.Mb(0,"h5",25),r.lc(1,"No Contacts found"),r.Lb())}function g(t,e){1&t&&(r.Mb(0,"div",27),r.lc(1,"Name cant be empty"),r.Lb())}function M(t,e){1&t&&(r.Mb(0,"div",27),r.lc(1,"Name should have min 3 characters"),r.Lb())}function v(t,e){if(1&t&&(r.Mb(0,"div"),r.jc(1,g,2,0,"div",26),r.jc(2,M,2,0,"div",26),r.Lb()),2&t){const t=r.Wb();r.zb(1),r.bc("ngIf",t.name.errors.required),r.zb(1),r.bc("ngIf",t.name.errors.minlength)}}function L(t,e){1&t&&(r.Mb(0,"div",27),r.lc(1,"Email cant be empty"),r.Lb())}function y(t,e){1&t&&(r.Mb(0,"div",27),r.lc(1,"Invalid Email"),r.Lb())}function C(t,e){if(1&t&&(r.Mb(0,"div"),r.jc(1,L,2,0,"div",26),r.jc(2,y,2,0,"div",26),r.Lb()),2&t){const t=r.Wb();r.zb(1),r.bc("ngIf",t.email.errors.required),r.zb(1),r.bc("ngIf",t.email.errors.email)}}function z(t,e){1&t&&(r.Mb(0,"div",27),r.lc(1,"Mobile cant be empty"),r.Lb())}function I(t,e){1&t&&(r.Mb(0,"div",27),r.lc(1,"Enter 10 Digits Mobile Number"),r.Lb())}function j(t,e){1&t&&(r.Mb(0,"div",27),r.lc(1,"Enter only 10 Digits"),r.Lb())}function w(t,e){if(1&t&&(r.Mb(0,"div"),r.jc(1,z,2,0,"div",26),r.jc(2,I,2,0,"div",26),r.jc(3,j,2,0,"div",26),r.Lb()),2&t){const t=r.Wb();r.zb(1),r.bc("ngIf",t.mobile.errors.required),r.zb(1),r.bc("ngIf",t.mobile.errors.minlength),r.zb(1),r.bc("ngIf",t.mobile.errors.maxlength)}}function U(t,e){1&t&&(r.Mb(0,"div",27),r.lc(1,"City cant be empty"),r.Lb())}function k(t,e){if(1&t&&(r.Mb(0,"div"),r.jc(1,U,2,0,"div",26),r.Lb()),2&t){const t=r.Wb();r.zb(1),r.bc("ngIf",t.city.errors.required)}}let S=(()=>{class t{constructor(t,e,i){this.fb=t,this.cservice=e,this.authService=i,this.contacts=[],this.canUpdate=!1,this.loaded=!1,this.cform=this.fb.group({name:["",[n.l.required,n.l.minLength(3)]],email:["",[n.l.required,n.l.email]],mobile:["",[n.l.required,n.l.minLength(10),n.l.maxLength(10)]],city:["",n.l.required]})}ngOnInit(){this.getContacts(),this.userProfile=this.authService.getUserMinProfile()}onSubmit(){const t=this.cform.value;this.canUpdate&&""!==this.cid?this.cservice.updateContact({cid:this.cid,name:t.name,mobile:t.mobile,city:t.city,email:t.email}).subscribe(t=>{t?(alert("Update successfull"),this.formReset(),this.getContacts()):alert("Something went wrong while updating contact")}):this.cservice.addContact(t).subscribe(t=>{this.getContacts()}),this.cform.reset()}getContacts(){this.loaded=!1,this.cservice.getContacts().subscribe(t=>{this.contacts=t,this.loaded=!0})}delete(t){this.formReset();const e=t.cid;confirm(`Are you sure to delete this contact with name ${t.name} ?`)&&this.cservice.delete(e).subscribe(t=>{t?this.getContacts():alert("Something went wrong while deleting contact")})}editContact(t){this.cid=t.cid,this.cform.setValue({name:t.name,city:t.city,mobile:t.mobile,email:t.email}),this.canUpdate=!0}search(){""!==this.searchStr?(this.loaded=!1,this.cservice.search(this.searchStr).subscribe(t=>{this.contacts=t,this.loaded=!0})):this.getContacts()}clear(){0===this.searchStr.length&&this.getContacts()}refreshContacts(){""!==this.searchStr&&(this.searchStr="",this.getContacts())}formReset(){this.cform.reset(),this.canUpdate=!1,this.cid=""}get name(){return this.cform.get("name")}get mobile(){return this.cform.get("mobile")}get email(){return this.cform.get("email")}get city(){return this.cform.get("city")}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(n.b),r.Jb(l),r.Jb(s.a))},t.\u0275cmp=r.Db({type:t,selectors:[["app-cbookhome"]],decls:40,vars:13,consts:[[1,"row"],[1,"col-md-8"],[1,"col-md-6"],[1,"text"],["type","text","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup.enter","keyup","blur"],[4,"ngIf","ngIfElse"],["role","status",1,"spinner-border",3,"hidden"],[1,"sr-only"],["elseBlock",""],[1,"col-md-4"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","formControlName","name","placeholder","Enter the name",1,"form-control"],[4,"ngIf"],["type","email","formControlName","email","placeholder","Enter the email",1,"form-control"],["type","text","formControlName","mobile","placeholder","Enter the mobile",1,"form-control"],["type","text","formControlName","city","placeholder","Enter the city",1,"form-control"],[1,"btn","btn-primary",3,"disabled","hidden"],[1,"table","table-striped","mt-2"],["scope","col"],["scope","col",4,"ngIf"],[4,"ngFor","ngForOf"],["scope","row"],[1,"fas","fa-edit",3,"click"],[1,"fas","fa-trash",3,"click"],[1,"text-info"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"]],template:function(t,e){if(1&t&&(r.Mb(0,"div",0),r.Mb(1,"div",1),r.Mb(2,"div",0),r.Mb(3,"div",2),r.Mb(4,"h5",3),r.lc(5,"Contacts"),r.Lb(),r.Lb(),r.Mb(6,"div",2),r.Mb(7,"input",4),r.Ub("ngModelChange",(function(t){return e.searchStr=t}))("keyup.enter",(function(){return e.search()}))("keyup",(function(){return e.clear()}))("blur",(function(){return e.refreshContacts()})),r.Lb(),r.Lb(),r.Lb(),r.jc(8,f,18,3,"div",5),r.Mb(9,"div",6),r.Mb(10,"span",7),r.lc(11,"Loading..."),r.Lb(),r.Lb(),r.jc(12,p,2,0,"ng-template",null,8,r.kc),r.Lb(),r.Mb(14,"div",9),r.Mb(15,"form",10),r.Ub("ngSubmit",(function(){return e.onSubmit()})),r.Mb(16,"div",11),r.Mb(17,"label"),r.lc(18,"Name:"),r.Lb(),r.Kb(19,"input",12),r.jc(20,v,3,2,"div",13),r.Lb(),r.Mb(21,"div",11),r.Mb(22,"label"),r.lc(23,"Email:"),r.Lb(),r.Kb(24,"input",14),r.jc(25,C,3,2,"div",13),r.Lb(),r.Mb(26,"div",11),r.Mb(27,"label"),r.lc(28,"Mobile:"),r.Lb(),r.Kb(29,"input",15),r.jc(30,w,4,3,"div",13),r.Lb(),r.Mb(31,"div",11),r.Mb(32,"label"),r.lc(33,"City:"),r.Lb(),r.Kb(34,"input",16),r.jc(35,k,2,1,"div",13),r.Lb(),r.Mb(36,"button",17),r.lc(37,"Add Contact"),r.Lb(),r.Mb(38,"button",17),r.lc(39,"Update Contact"),r.Lb(),r.Lb(),r.Lb(),r.Lb()),2&t){const t=r.ec(13);r.zb(7),r.bc("ngModel",e.searchStr),r.zb(1),r.bc("ngIf",e.contacts&&e.contacts.length>0)("ngIfElse",t),r.zb(1),r.bc("hidden",e.loaded),r.zb(6),r.bc("formGroup",e.cform),r.zb(5),r.bc("ngIf",e.name.touched&&!e.name.valid),r.zb(5),r.bc("ngIf",e.email.touched&&e.email.invalid),r.zb(5),r.bc("ngIf",e.mobile.touched&&e.mobile.invalid),r.zb(5),r.bc("ngIf",e.city.touched&&e.city.invalid),r.zb(1),r.bc("disabled",!e.cform.valid)("hidden",e.canUpdate),r.zb(2),r.bc("disabled",!e.cform.valid)("hidden",!e.canUpdate)}},directives:[n.a,n.f,n.i,c.l,n.m,n.g,n.d,n.c,c.k],styles:[""]}),t})();var N=i("tyNb");const E=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["app-cbook"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Mb(0,"div"),r.Kb(1,"router-outlet"),r.Lb())},directives:[N.e],styles:[""]}),t})(),children:[{path:"",component:S},{path:"home",component:S}]}];let P=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[N.d.forChild(E)],N.d]}),t})(),$=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[c.b,P,n.k,n.e]]}),t})()}}]);